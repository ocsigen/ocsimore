<html><head><title>Module Page_site </title><meta charset="utf8"/><meta content="width=device-width, initial-scale=1" name="viewport"/></head><body class="Page_site dev"><h1>Module <span><a href=".././api/Page_site">Page_site</a></span> </h1><pre class="ocsforge_color odocwiki_code"><span class="ocsforge_color_keyword">module</span> <span class="ocsforge_color_uid"><span class="ocsforge_color_uid">Page_site</span></span> <span class="ocsforge_color_delimiter">:</span> <span class="ocsforge_color_keyword">sig</span><span><a href=".././api/Page_site">..</a></span><span class="ocsforge_color_keyword">end</span></pre><p><strong>Author(s):</strong> Boris Yakobowski<br/>
</p><hr/><pre class="ocsforge_color odocwiki_code" id="TYPEmenu_link_service"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">menu_link_service</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_delimiter">(</span><span class="ocsforge_color_uid">Eliom_service</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">get_service_kind</span>, <span class="ocsforge_color_uid">Eliom_service</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">registrable</span>,<br/>   <span class="ocsforge_color_uid">Eliom_registration</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">non_ocaml_service</span><span class="ocsforge_color_delimiter">)</span><br/>  <span class="ocsforge_color_uid">Eliom_tools_common</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">one_page</span></span></pre><div class="odocwiki_info"><p>An alias for the services that are accepted in the admin menu.</p></div><pre class="ocsforge_color odocwiki_code" id="VALstatic_service"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">static_service</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_delimiter">(</span>string list, unit, <span class="ocsforge_color_uid">Eliom_service</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">get_service_kind</span>,<br/>   <span class="ocsforge_color_uid">Eliom_service</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">attached</span>, <span class="ocsforge_color_uid">Eliom_service</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">service_kind</span>, [ `WithSuffix ],<br/>   [ `One of string list ] <span class="ocsforge_color_uid">Eliom_parameter</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">param_name</span>, unit,<br/>   [ `Registrable ], <span class="ocsforge_color_uid">Eliom_registration</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">http_service</span><span class="ocsforge_color_delimiter">)</span><br/>  <span class="ocsforge_color_uid">Eliom_service</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">service</span></span></pre><div class="odocwiki_info"><p>The service that answers for Ocsimore static files.</p></div><pre class="ocsforge_color odocwiki_code" id="VALstatic_file_uri"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">static_file_uri</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_label">path:</span>string list <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_uid">Eliom_content</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">Html5</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">F</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">uri</span></span></pre><div class="odocwiki_info"><p>Path to a static file, suitable for inclusion in a &lt;a&gt; tag</p></div><pre class="ocsforge_color odocwiki_code" id="VALadmin_staticdir"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">admin_staticdir</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string</span></pre><pre class="ocsforge_color odocwiki_code"><span class="ocsforge_color_keyword">module</span> <span><a href=".././api/Page_site.Header">Header</a></span> <span class="ocsforge_color_delimiter">:</span> <span class="ocsforge_color_keyword">sig</span><span><a href=".././api/Page_site.Header">..</a></span><span class="ocsforge_color_keyword">end</span></pre><div class="odocwiki_info"><p>Allows to add HTML headers required by page components</p></div><pre class="ocsforge_color odocwiki_code" id="VALadd_admin_pages_header"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">add_admin_pages_header</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p>Function to be called on admin pages, and which add the
relevant css (including for the admin menu)</p></div><pre class="ocsforge_color odocwiki_code" id="VALadd_onload_function"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">add_onload_function</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p>Registers the string passed as argument so that it is called
when the onload event on the body tag of the page fires. The
string must thus be well-formed javascript (without ; at the end)</p></div><pre class="ocsforge_color odocwiki_code" id="VALhtml_page"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">html_page</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?body_classes:</span><span class="ocsforge_color_uid">Html5_types</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">nmtokens</span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?css:</span><span class="ocsforge_color_uid">Html5_types</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">link</span> <span class="ocsforge_color_uid">Eliom_content</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">Html5</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">F</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">elt</span> list <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?title:</span>string <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?heading:</span>string <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_uid">Html5_types</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">body_content</span> <span class="ocsforge_color_uid">Eliom_content</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">Html5</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">F</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">elt</span> list <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_uid">Eliom_content</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">Html5</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">F</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">html</span> <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p>Generic headers for an html page. The arguments <span class="odocwiki_inlinecode">css</span> is added
after the links resulting from the hooks added by the function
<span class="odocwiki_inlinecode">add_html_header_hook</span> above. The argument <span class="odocwiki_inlinecode">body_classes</span> is
used for the classes of the <span class="odocwiki_inlinecode">body</span> html element.</p></div><p>Functions related to the administration menu
</p><pre class="ocsforge_color odocwiki_code" id="VALadd_to_admin_menu"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">add_to_admin_menu</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">name:</span>string <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">links:</span><span class="ocsforge_color_delimiter">(</span>string * <span><a href=".././api/Page_site#TYPEmenu_link_service">menu_link_service</a></span> * <span class="ocsforge_color_delimiter">(</span>unit <span class="ocsforge_color_delimiter">-&gt;</span> bool <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span><span class="ocsforge_color_delimiter">)</span><span class="ocsforge_color_delimiter">)</span><br/>        list <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">root:</span><span><a href=".././api/Page_site#TYPEmenu_link_service">menu_link_service</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Adds an entire subsection, labelled by <span class="odocwiki_inlinecode">name</span> to the admin menu.
The service <span class="odocwiki_inlinecode">root</span> is used to represent this section. For the
list of links, if the function returns <span class="odocwiki_inlinecode">false</span>, the link is
not displayed.</p></div><pre class="ocsforge_color odocwiki_code" id="VALadmin_page"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">admin_page</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?service:</span><span><a href=".././api/Page_site#TYPEmenu_link_service">menu_link_service</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?body_classes:</span>string list <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?css:</span><span class="ocsforge_color_uid">Html5_types</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">link</span> <span class="ocsforge_color_uid">Eliom_content</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">Html5</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">F</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">elt</span> list <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">title:</span>string <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_uid">Html5_types</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">flow5</span> <span class="ocsforge_color_uid">Eliom_content</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">Html5</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">F</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">elt</span> list <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_uid">Eliom_content</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">Html5</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">F</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">html</span> <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p>Displays a complete admin page, with the admin menu and the status bar.
If <span class="odocwiki_inlinecode">allow_unlogged</span> is false, users that have not logged-in will not
be able to see the page</p></div><pre class="ocsforge_color odocwiki_code" id="VALbody_to_div"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">body_to_div</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_uid">Html5_types</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">body_content</span> <span class="ocsforge_color_uid">Eliom_content</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">Html5</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">F</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">elt</span> list <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_uid">Html5_types</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">flow5</span> <span class="ocsforge_color_uid">Eliom_content</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">Html5</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">F</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">elt</span> list</span></pre><pre class="ocsforge_color odocwiki_code" id="VALuserid_permissions"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">userid_permissions</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_delimiter">(</span><span><a href=".././api/User_sql.Types#TYPEuserid">User_sql.Types.userid</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> bool <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span><span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span> bool <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALno_permission"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">no_permission</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  unit <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_uid">Html5_types</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">body_content</span> <span class="ocsforge_color_uid">Eliom_content</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">Html5</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">F</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">elt</span> list <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALadmin_body_content_with_permission_handler"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">admin_body_content_with_permission_handler</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">title:</span><span class="ocsforge_color_delimiter">(</span>'get_params <span class="ocsforge_color_delimiter">-&gt;</span> 'post_params <span class="ocsforge_color_delimiter">-&gt;</span> string <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span><span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?service:</span><span class="ocsforge_color_delimiter">(</span>'get_params <span class="ocsforge_color_delimiter">-&gt;</span><br/>            'post_params <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Page_site#TYPEmenu_link_service">menu_link_service</a></span> <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span><span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">permissions:</span><span class="ocsforge_color_delimiter">(</span>'get_params <span class="ocsforge_color_delimiter">-&gt;</span> 'post_params <span class="ocsforge_color_delimiter">-&gt;</span> bool <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span><span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">display:</span><span class="ocsforge_color_delimiter">(</span>'get_params <span class="ocsforge_color_delimiter">-&gt;</span><br/>           'post_params <span class="ocsforge_color_delimiter">-&gt;</span><br/>           [&lt; <span class="ocsforge_color_uid">Html5_types</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">body_content</span> ] <span class="ocsforge_color_uid">Eliom_content</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">Html5</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">F</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">elt</span> list<br/>           <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span><span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  'get_params <span class="ocsforge_color_delimiter">-&gt;</span> 'post_params <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_uid">Eliom_content</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">Html5</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">F</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">html</span> <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p>Display a <span class="odocwiki_inlinecode">widget#display</span> as a <span class="odocwiki_inlinecode">admin_page</span> under certain <span class="odocwiki_inlinecode">permissions</span>. Also, some parameters of <span class="odocwiki_inlinecode">admin_page</span> are
made available here.</p></div><pre class="ocsforge_color odocwiki_code" id="VALicon"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">icon</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">path:</span>string <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">text:</span>string <span class="ocsforge_color_delimiter">-&gt;</span> [&gt; `Img ] <span class="ocsforge_color_uid">Eliom_content</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">Html5</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">F</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">elt</span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALadd_status_function"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">add_status_function</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_delimiter">(</span>unit <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_uid">Html5_types</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">flow5</span> <span class="ocsforge_color_uid">Eliom_content</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">Html5</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">F</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">elt</span> <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span><span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre></body></html>
