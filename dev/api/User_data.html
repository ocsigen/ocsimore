<html><head><title>Module User_data </title><meta charset="utf8"/><meta content="width=device-width, initial-scale=1" name="viewport"/></head><body class="User_data dev"><h1>Module <span><a href=".././api/User_data">User_data</a></span> </h1><pre class="ocsforge_color odocwiki_code"><span class="ocsforge_color_keyword">module</span> <span class="ocsforge_color_uid"><span class="ocsforge_color_uid">User_data</span></span> <span class="ocsforge_color_delimiter">:</span> <span class="ocsforge_color_keyword">sig</span><span><a href=".././api/User_data">..</a></span><span class="ocsforge_color_keyword">end</span></pre><p><strong>Author(s):</strong> Piero Furiesi, Jaap Boender, Vincent Balat, Boris Yakobowski<br/>
</p><hr/><pre class="ocsforge_color odocwiki_code" id="VALvalid_username"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">valid_username</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> bool</span></pre><pre class="ocsforge_color odocwiki_code" id="VALvalid_emailaddr"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">valid_emailaddr</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> bool</span></pre><pre class="ocsforge_color odocwiki_code" id="VALgenerate_password"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">generate_password</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> bytes</span></pre><h2 id="2_Usercreation">User creation <a class="backref" href="#2_Usercreation">&#182;</a></h2><pre class="ocsforge_color odocwiki_code" id="TYPEuser_creation"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">user_creation</span> <span class="ocsforge_color_delimiter">=</span> <span class="ocsforge_color_delimiter">{</span>
<span class="odocwiki_record"><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">non_admin_can_create:</span> <span class="odocwiki_type">bool</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">mail_from:</span> <span class="odocwiki_type">string</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">mail_addr:</span> <span class="odocwiki_type">string</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">mail_subject:</span> <span class="odocwiki_type">string</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">new_user_groups:</span> <span class="odocwiki_type"><span><a href=".././api/User_sql.Types#TYPEuser">User_sql.Types.user</a></span> list</span><span class="ocsforge_color_delimiter">;</span></span></span></span><span class="ocsforge_color_delimiter">}</span></pre><div class="odocwiki_info"><p>Options for the creation of a new user</p></div><pre class="ocsforge_color odocwiki_code" id="VALcan_create_user"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">can_create_user</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_label">options:</span><span><a href=".././api/User_data#TYPEuser_creation">user_creation</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> bool <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALcan_create_group"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">can_create_group</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> bool <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALcan_admin_users"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">can_admin_users</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> bool <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALcreate_group"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">create_group</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">name:</span>string <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">descr:</span>string <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/User_sql.Types#TYPEuserid">User_sql.Types.userid</a></span> <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><h2 id="2_Changeuserinformation">Change user information <a class="backref" href="#2_Changeuserinformation">&#182;</a></h2><pre class="ocsforge_color odocwiki_code" id="VALcan_view_users"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">can_view_users</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> bool <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALcan_view_groups"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">can_view_groups</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> bool <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALcan_view_roles"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">can_view_roles</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> bool <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALcan_change_user_data_by_userid"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">can_change_user_data_by_userid</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/User_sql.Types#TYPEuserid">User_sql.Types.userid</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> bool <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALcan_change_user_data_by_user"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">can_change_user_data_by_user</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/User_sql.Types#TYPEuser">User_sql.Types.user</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> bool <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALchange_user_data"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">change_user_data</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">userid:</span><span><a href=".././api/User_sql.Types#TYPEuserid">User_sql.Types.userid</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">pwd:</span>string * string <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">fullname:</span>string <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">email:</span>string <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><h2 id="2_Editionofgroups">Edition of groups <a class="backref" href="#2_Editionofgroups">&#182;</a></h2><pre class="ocsforge_color odocwiki_code" id="VALadd_remove_user_from_group"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">add_remove_user_from_group</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">group:</span>string <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">user:</span>string <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_delimiter">(</span><span class="ocsforge_color_label">user:</span><span><a href=".././api/User_sql.Types#TYPEuser">User_sql.Types.user</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">group:</span><span><a href=".././api/User_sql.Types#TYPEuser">User_sql.Types.user</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span><span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  unit <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALadd_user_from_group"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">add_user_from_group</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_label">group:</span>string <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">user:</span>string <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALremove_user_from_group"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">remove_user_from_group</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">group:</span>string <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">user:</span>string <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><h2 id="2_Loginandlogout">Login and logout <a class="backref" href="#2_Loginandlogout">&#182;</a></h2><pre class="ocsforge_color odocwiki_code" id="VALlogout"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">logout</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALth_login"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">th_login</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Throttle</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALth_ip"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">th_ip</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Throttle</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALlogin"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">login</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_label">name:</span><span class="ocsforge_color_uid">Throttle</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">key</span> <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">pwd:</span>string <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><h2 id="2_Loginerrortracking">Login error tracking <a class="backref" href="#2_Loginerrortracking">&#182;</a></h2><pre class="ocsforge_color odocwiki_code" id="VALlogin_error_eref"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">login_error_eref</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">exn list <span class="ocsforge_color_uid">Eliom_reference</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">eref</span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALget_login_error"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">get_login_error</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> exn list <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALadd_login_error"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">add_login_error</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">exn <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre></body></html>
