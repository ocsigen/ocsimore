<html><head><title>Module User_sql.Types </title><meta charset="utf8"/><meta content="width=device-width, initial-scale=1" name="viewport"/></head><body class="User_sql.Types dev"><h1>Module <span><a href=".././api/User_sql.Types">User_sql.Types</a></span> </h1><pre class="ocsforge_color odocwiki_code"><span class="ocsforge_color_keyword">module</span> <span class="ocsforge_color_uid"><span class="ocsforge_color_uid">Types</span></span> <span class="ocsforge_color_delimiter">:</span> <span class="ocsforge_color_keyword">sig</span><span><a href=".././api/User_sql.Types">..</a></span><span class="ocsforge_color_keyword">end</span></pre><hr/><pre class="ocsforge_color odocwiki_code" id="TYPEuserid"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">userid</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type">[ `User ] <span><a href=".././api/Opaque#TYPEint32_t">Opaque.int32_t</a></span></span></pre><div class="odocwiki_info"><p>The abstract type of user ids</p></div><pre class="ocsforge_color odocwiki_code" id="VALuserid_from_sql"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">userid_from_sql</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">int32 <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/User_sql.Types#TYPEuserid">userid</a></span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALsql_from_userid"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">sql_from_userid</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/User_sql.Types#TYPEuserid">userid</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> int32</span></pre><pre class="ocsforge_color odocwiki_code" id="VALstring_from_userid"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">string_from_userid</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/User_sql.Types#TYPEuserid">userid</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> string</span></pre><pre class="ocsforge_color odocwiki_code" id="TYPEpwd"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">pwd</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_variants"><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">Connect_forbidden</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">Ocsimore_user_plain</span> <span class="ocsforge_color_keyword">of</span> <span class="odocwiki_type">string</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">Ocsimore_user_crypt</span> <span class="ocsforge_color_keyword">of</span> <span class="odocwiki_type">string</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">Ocsimore_user_safe</span> <span class="ocsforge_color_keyword">of</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Bcrypt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">hash_t</span></span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">External_Auth</span></span></span></span></pre><pre class="ocsforge_color odocwiki_code" id="TYPEfind_param"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">find_param</span> <span class="ocsforge_color_delimiter">=</span> <span class="ocsforge_color_delimiter">{</span>
<span class="odocwiki_record"><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">param_description:</span> <span class="odocwiki_type">string</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">param_get:</span> <span class="odocwiki_type"><br/>    unit <span class="ocsforge_color_delimiter">-&gt;</span><br/>    &lt; id : &lt; get : unit; nul : <span class="ocsforge_color_uid">Sql</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">non_nullable</span>; t : <span class="ocsforge_color_uid">Sql</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">int32_t</span> &gt;<br/>           <span class="ocsforge_color_uid">Sql</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span>;<br/>      title : &lt; get : unit; nul : <span class="ocsforge_color_uid">Sql</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">nullable</span>; t : <span class="ocsforge_color_uid">Sql</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">string_t</span> &gt;<br/>              <span class="ocsforge_color_uid">Sql</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span> &gt;<br/>    list <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">param_display:</span> <span class="odocwiki_type"><span class="ocsforge_color_delimiter">(</span>int32 <span class="ocsforge_color_delimiter">-&gt;</span> string <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span><span class="ocsforge_color_delimiter">)</span> option</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">find_param_functions:</span> <span class="odocwiki_type"><br/>    <span class="ocsforge_color_delimiter">(</span><span class="ocsforge_color_delimiter">(</span>string <span class="ocsforge_color_delimiter">-&gt;</span> int32 <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span><span class="ocsforge_color_delimiter">)</span> * <span class="ocsforge_color_delimiter">(</span>int32 <span class="ocsforge_color_delimiter">-&gt;</span> string <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span><span class="ocsforge_color_delimiter">)</span><span class="ocsforge_color_delimiter">)</span> option</span><span class="ocsforge_color_delimiter">;</span></span></span></span><span class="ocsforge_color_delimiter">}</span></pre><div class="odocwiki_info"><p>Description of the parameter of a paramaterized group</p></div><pre class="ocsforge_color odocwiki_code" id="TYPEuserdata"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">userdata</span> <span class="ocsforge_color_delimiter">=</span> <span class="ocsforge_color_delimiter">{</span>
<span class="odocwiki_record"><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">user_id:</span> <span class="odocwiki_type"><span><a href=".././api/User_sql.Types#TYPEuserid">userid</a></span></span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">user_login:</span> <span class="odocwiki_type">string</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">user_pwd:</span> <span class="odocwiki_type"><span><a href=".././api/User_sql.Types#TYPEpwd">pwd</a></span></span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">user_fullname:</span> <span class="odocwiki_type">string</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">user_email:</span> <span class="odocwiki_type">string option</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">user_dyn:</span> <span class="odocwiki_type">bool</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">user_kind:</span> <span class="odocwiki_type"><br/>    [ `BasicUser<br/>    | `NonParameterizedGroup<br/>    | `ParameterizedGroup of <span><a href=".././api/User_sql.Types#TYPEfind_param">find_param</a></span> option ]</span><span class="ocsforge_color_delimiter">;</span></span></span></span><span class="ocsforge_color_delimiter">}</span></pre><pre class="ocsforge_color odocwiki_code" id="TYPEparameterized_group"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_type">'a</span> <span class="odocwiki_name">parameterized_group</span></pre><pre class="ocsforge_color odocwiki_code" id="VALparameterized_group_from_userid"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">parameterized_group_from_userid</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/User_sql.Types#TYPEuserid">userid</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/User_sql.Types#TYPEparameterized_group">parameterized_group</a></span></span></pre><pre class="ocsforge_color odocwiki_code" id="TYPEuser"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">user</span></pre><pre class="ocsforge_color odocwiki_code" id="VALapply_parameterized_group"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">apply_parameterized_group</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  'a <span><a href=".././api/User_sql.Types#TYPEparameterized_group">parameterized_group</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  'a <span><a href=".././api/Opaque#TYPEint32_t">Opaque.int32_t</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/User_sql.Types#TYPEuser">user</a></span></span></pre><pre class="ocsforge_color odocwiki_code" id="VAL($)"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">($)</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  'a <span><a href=".././api/User_sql.Types#TYPEparameterized_group">parameterized_group</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  'a <span><a href=".././api/Opaque#TYPEint32_t">Opaque.int32_t</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/User_sql.Types#TYPEuser">user</a></span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALbasic_user"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">basic_user</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/User_sql.Types#TYPEuserid">userid</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/User_sql.Types#TYPEuser">user</a></span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALnon_parameterized_group"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">non_parameterized_group</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/User_sql.Types#TYPEuserid">userid</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/User_sql.Types#TYPEuser">user</a></span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALuserid_from_user"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">userid_from_user</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/User_sql.Types#TYPEuser">user</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/User_sql.Types#TYPEuserid">userid</a></span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALis_basic_user"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">is_basic_user</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/User_sql.Types#TYPEuser">user</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/User_sql.Types#TYPEuserid">userid</a></span> option</span></pre><div class="odocwiki_info"><p>Converts an user back into an userid, if possible</p></div><pre class="ocsforge_color odocwiki_code" id="VALuser_is_applied_parameterized_group"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">user_is_applied_parameterized_group</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">user:</span><span><a href=".././api/User_sql.Types#TYPEuser">user</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">pgroup:</span>'a <span><a href=".././api/User_sql.Types#TYPEparameterized_group">parameterized_group</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  'a <span><a href=".././api/Opaque#TYPEint32_t">Opaque.int32_t</a></span> option</span></pre><div class="odocwiki_info"><p>Returns <span class="odocwiki_inlinecode">Some v</span> is <span class="odocwiki_inlinecode">user</span> is <span class="odocwiki_inlinecode">group $ v</span>, or <span class="odocwiki_inlinecode">None</span> otherwise</p></div><pre class="ocsforge_color odocwiki_code" id="TYPEadmin_writer_reader"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_type">'a</span> <span class="odocwiki_name">admin_writer_reader</span> <span class="ocsforge_color_delimiter">=</span> <span class="ocsforge_color_delimiter">{</span>
<span class="odocwiki_record"><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">grp_admin:</span> <span class="odocwiki_type">'a <span><a href=".././api/User_sql.Types#TYPEparameterized_group">parameterized_group</a></span></span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">grp_writer:</span> <span class="odocwiki_type">'a <span><a href=".././api/User_sql.Types#TYPEparameterized_group">parameterized_group</a></span></span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">grp_reader:</span> <span class="odocwiki_type">'a <span><a href=".././api/User_sql.Types#TYPEparameterized_group">parameterized_group</a></span></span><span class="ocsforge_color_delimiter">;</span></span></span></span><span class="ocsforge_color_delimiter">}</span></pre><pre class="ocsforge_color odocwiki_code" id="TYPEusers"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">users</span> <span class="ocsforge_color_delimiter">=</span> <span class="ocsforge_color_delimiter">{</span>
<span class="odocwiki_record"><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">users:</span> <span class="odocwiki_type"><span><a href=".././api/User_sql.Types#TYPEuserdata">userdata</a></span> list <span class="ocsforge_color_uid">Lazy</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">groups:</span> <span class="odocwiki_type"><span><a href=".././api/User_sql.Types#TYPEuserdata">userdata</a></span> list <span class="ocsforge_color_uid">Lazy</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">roles:</span> <span class="odocwiki_type"><span><a href=".././api/User_sql.Types#TYPEuserdata">userdata</a></span> list <span class="ocsforge_color_uid">Lazy</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span><span class="ocsforge_color_delimiter">;</span></span></span></span><span class="ocsforge_color_delimiter">}</span></pre></body></html>
