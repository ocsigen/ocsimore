<html><head><title>Module Wikiperso </title><meta charset="utf8"/><meta content="width=device-width, initial-scale=1" name="viewport"/></head><body class="Wikiperso dev"><h1>Module <span><a href=".././api/Wikiperso">Wikiperso</a></span> </h1><pre class="ocsforge_color odocwiki_code"><span class="ocsforge_color_keyword">module</span> <span class="ocsforge_color_uid"><span class="ocsforge_color_uid">Wikiperso</span></span> <span class="ocsforge_color_delimiter">:</span> <span class="ocsforge_color_keyword">sig</span><span><a href=".././api/Wikiperso">..</a></span><span class="ocsforge_color_keyword">end</span></pre><p><strong>Author(s):</strong> Vincent Balat, Boris Yakobowski<br/>
</p><hr/><p>Wikiperso is an eliom extension that can be used to provide
personal wikis. That is, when the user accesses a page
such as webserver.org/~bla/foo, a personal wiki is created
for the user bla, and registered to the url ~bla
</p><p>Wikiperso currently takes two config options (in this order)
</p><ul><li> username is a regexp with one parameter, which must
extract from an url the name of the user for which the
wiki must be created, or fail if no wiki must be created.
</li></ul><ul><li> wikiroot is a regexp containing the string $USER. Replacing $USER
by the user for which the wiki must be created must result
in the root url for this wiki (of course relative to the current
eliom root url). Correct values could be <span class="odocwiki_inlinecode">~$USER</span> or <span class="odocwiki_inlinecode">perso/$USER</span>
</li></ul><p>An example configuration is given below
</p><p>&lt;eliommodule module=&quot;/path/to/wikiperso.cmo&quot;&gt;
&lt;options username=&quot;~(<span class="odocwiki_inlinecode">^/</span>* ).*&quot; wikiroot=&quot;~$USER&quot; /&gt;
&lt;/eliommodule&gt;
</p><pre class="ocsforge_color odocwiki_code" id="VALextract_user_name"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">extract_user_name</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> string option</span></pre><pre class="ocsforge_color odocwiki_code" id="VALwiki_path"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">wiki_path</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> string list</span></pre><pre class="ocsforge_color odocwiki_code" id="VALexternal_user"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">external_user</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/User_sql.Types#TYPEuserid">User_sql.Types.userid</a></span> option <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><p>Template pages, for the containers and the css of the new wikis. They are
copied each time a new wiki is created
</p><pre class="ocsforge_color odocwiki_code" id="VALdefault_welcome_page"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">default_welcome_page</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string</span></pre><pre class="ocsforge_color odocwiki_code" id="VALdefault_wikicss"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">default_wikicss</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string</span></pre><pre class="ocsforge_color odocwiki_code" id="VALtemplate_container_pagename"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">template_container_pagename</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string</span></pre><pre class="ocsforge_color odocwiki_code" id="VALtemplate_css_pagename"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">template_css_pagename</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string</span></pre><pre class="ocsforge_color odocwiki_code" id="VALtemplate_container"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">template_container</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> string <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALtemplate_wiki_css"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">template_wiki_css</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> string <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALcreate_wikiperso"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">create_wikiperso</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">model:</span><span><a href=".././api/Wiki_types#TYPEwiki_model">Wiki_types.wiki_model</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">wiki_title:</span>string <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">userdata:</span><span><a href=".././api/User_sql.Types#TYPEuserdata">User_sql.Types.userdata</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Wiki_types#TYPEwiki">Wiki_types.wiki</a></span> <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p>The function that creates the wikiperso when needed</p></div><pre class="ocsforge_color odocwiki_code" id="VALfind_user"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">find_user</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/User_sql.Types#TYPEuserid">User_sql.Types.userid</a></span> option <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALcan_have_wikiperso"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">can_have_wikiperso</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/User_sql.Types#TYPEuser">User_sql.Types.user</a></span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALcannot_have_wikiperso"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">cannot_have_wikiperso</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/User_sql.Types#TYPEuser">User_sql.Types.user</a></span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALf_can_have_wikiperso"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">f_can_have_wikiperso</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/User_sql.Types#TYPEuser">User_sql.Types.user</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> bool <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><pre class="ocsforge_color odocwiki_code"><span><span class="ocsforge_color_keyword">class</span> <span><a href=".././api/Wikiperso.wikiperso_rights-c">wikiperso_rights</a></span></span> <span class="ocsforge_color_delimiter">:</span>  <span class="ocsforge_color_keyword">object</span><span><a href=".././api/Wikiperso.wikiperso_rights-c">..</a></span><span class="ocsforge_color_keyword">end</span></pre><pre class="ocsforge_color odocwiki_code" id="VALwikiperso_rights"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">wikiperso_rights</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Wikiperso.wikiperso_rights-c">wikiperso_rights</a></span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALwikiperso_model"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">wikiperso_model</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Wiki_types#TYPEwiki_model">Wiki_types.wiki_model</a></span> <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALgen"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">gen</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_uid">Ocsigen_extensions</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">answer</span> <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p>The function that answers for the extension.</p></div><pre class="ocsforge_color odocwiki_code" id="VALusers_root"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">users_root</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_delimiter">(</span>unit, unit, [&lt; <span class="ocsforge_color_uid">Eliom_service</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">service_method</span> &gt; `Get ],<br/>   [&lt; <span class="ocsforge_color_uid">Eliom_service</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">attached</span> &gt; `Attached ],<br/>   [&lt; <span class="ocsforge_color_uid">Eliom_service</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">service_kind</span> &gt; `Service ], [ `WithoutSuffix ], <br/>   unit, unit, [&lt; <span class="ocsforge_color_uid">Eliom_service</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">registrable</span> &gt; `Registrable ],<br/>   [&gt; <span class="ocsforge_color_uid">Eliom_service</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">appl_service</span> ]<span class="ocsforge_color_delimiter">)</span><br/>  <span class="ocsforge_color_uid">Eliom_service</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">service</span></span></pre></body></html>
